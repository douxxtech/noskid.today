//Cw.js | ClassicWindow, a web window manager 


(function(g){'use strict';function i(){if(!document.getElementById('c-s')){const s=document.createElement('style');s.id='c-s';s.textContent='.c-w{position:absolute;background-color:rgba(32,32,32,.95);border:1px solid rgba(255,255,255,.1);border-radius:8px;box-shadow:0 10px 25px rgba(0,0,0,.25);overflow:hidden;min-width:300px;min-height:200px;z-index:100;font-family:"Segoe UI",sans-serif;backdrop-filter:blur(10px)}.c-tb{background:transparent;padding:10px 15px;color:white;font-weight:normal;cursor:move;display:flex;justify-content:space-between;align-items:center;user-select:none;height:28px}.c-t{font-size:13px;margin-right:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.c-cs{display:flex;gap:8px}.c-c{width:14px;height:14px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:10px;color:#fff;opacity:.7;transition:all .2s;border-radius:50%}.c-c:hover{opacity:1;background-color:rgba(255,255,255,.1)}.c-m{color:#fff}.c-x{color:#fff}.c-cl{color:#fff}.c-cl:hover{background-color:#e81123;color:#fff;opacity:1}.c-cnt{padding:15px;overflow:auto;color:#f0f0f0;font-size:14px;height:calc(100% - 66px);box-sizing:border-box}.c-sb{background-color:rgba(32,32,32,.7);border-top:1px solid rgba(255,255,255,.05);padding:6px 15px;font-size:12px;color:#bbb;position:absolute;bottom:0;width:100%;box-sizing:border-box}.c-w.max{width:100%!important;height:100%!important;top:0!important;left:0!important;border-radius:0!important}.c-mb{background:rgba(32,32,32,.9);color:white;border:1px solid rgba(255,255,255,.1);padding:8px 15px;border-radius:6px;cursor:pointer;margin:5px;font-size:12px;font-family:"Segoe UI",sans-serif;transition:all .2s}.c-mb:hover{background:rgba(45,45,45,.9)}';document.head.appendChild(s)}}function e(){let c=document.getElementById('c-mc');if(!c){c=document.createElement('div');c.id='c-mc';c.style.position='fixed';c.style.bottom='10px';c.style.left='10px';c.style.zIndex='1000';document.body.appendChild(c)}return c}function t(){const w=document.querySelectorAll('.c-w');let m=100;w.forEach(n=>{const z=parseInt(window.getComputedStyle(n).zIndex,10);if(!isNaN(z)&&z>m)m=z});return m}function c(o={}){i();const d={title:'Window',content:'',width:400,height:300,x:50,y:50,statusText:'',onClose:null,draggable:!0,resizable:!0},s=Object.assign({},d,o),w=document.createElement('div');w.className='c-w';w.style.width=s.width+'px';w.style.height=s.height+'px';w.style.left=s.x+'px';w.style.top=s.y+'px';w.dataset.title=s.title;const b=document.createElement('div');b.className='c-tb';const l=document.createElement('div');l.className='c-t';l.textContent=s.title;const k=document.createElement('div');k.className='c-cs';const n=document.createElement('div');n.className='c-c c-m';n.innerHTML='&#8211;';n.title='Minimize';const x=document.createElement('div');x.className='c-c c-x';x.innerHTML='&#9744;';x.title='Maximize';const q=document.createElement('div');q.className='c-c c-cl';q.innerHTML='&#10006;';q.title='Close';k.appendChild(n);k.appendChild(x);k.appendChild(q);b.appendChild(l);b.appendChild(k);const j=document.createElement('div');j.className='c-cnt';if(typeof s.content==='string')j.innerHTML=s.content;else if(s.content instanceof HTMLElement)j.appendChild(s.content);const f=document.createElement('div');f.className='c-sb';f.textContent=s.statusText;w.appendChild(b);w.appendChild(j);w.appendChild(f);document.body.appendChild(w);q.addEventListener('click',()=>{if(typeof s.onClose==='function')s.onClose();w.remove()});n.addEventListener('click',()=>{w.style.display='none';const r=e(),h=document.createElement('button');h.className='c-mb';h.textContent=s.title;h.dataset.windowId=w.id||Date.now().toString();h.addEventListener('click',()=>{w.style.display='block';w.style.zIndex=t()+1;h.remove()});r.appendChild(h)});let y={width:s.width,height:s.height,x:s.x,y:s.y};x.addEventListener('click',()=>{if(w.classList.contains('max')){w.classList.remove('max');w.style.width=y.width+'px';w.style.height=y.height+'px';w.style.left=y.x+'px';w.style.top=y.y+'px';x.innerHTML='&#9744;'}else{y={width:w.offsetWidth,height:w.offsetHeight,x:w.offsetLeft,y:w.offsetTop};w.classList.add('max');x.innerHTML='&#9635;'}});if(s.draggable){let p=!1,v=0,u=0;b.addEventListener('mousedown',a=>{if(w.classList.contains('max'))return;p=!0;v=a.clientX-w.offsetLeft;u=a.clientY-w.offsetTop;w.style.zIndex=t()+1});document.addEventListener('mousemove',a=>{if(!p)return;w.style.left=(a.clientX-v)+'px';w.style.top=(a.clientY-u)+'px'});document.addEventListener('mouseup',()=>{p=!1})}w.addEventListener('mousedown',()=>{w.style.zIndex=t()+1});w.style.zIndex=t()+1;return w}function a(){return Array.from(document.querySelectorAll('.c-w'))}function b(){a().forEach(w=>w.remove());const c=document.getElementById('c-mc');if(c)c.innerHTML=''}function u(w,c){if(!w||!w.classList.contains('c-w'))return;const j=w.querySelector('.c-cnt');if(!j)return;if(typeof c==='string')j.innerHTML=c;else if(c instanceof HTMLElement){j.innerHTML='';j.appendChild(c)}}function s(w,t){if(!w||!w.classList.contains('c-w'))return;const b=w.querySelector('.c-sb');if(b)b.textContent=t}g.ClassicWindow={createWindow:c,getAllWindows:a,closeAllWindows:b,updateWindowContent:u,updateStatusText:s,getTopZIndex:t}})(typeof window!=='undefined'?window:this);